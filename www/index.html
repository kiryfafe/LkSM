<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#121212" />
  <title>Личный кабинет</title>

  <!-- Стили -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
</head>

<body>
  <!-- Приветственный экран -->
  <div id="welcome-screen">
    <img id="welcome-logo" src="assets/icons/Logo_Welcome.png" alt="Логотип приложения" />
    <p>Здравствуйте, <span id="user-name">Гость</span></p>
  </div>

  <!-- Основное приложение -->
  <div id="main-app">
    <!-- Логотип -->
    <div class="main-logo-container">
      <img id="main-logo" src="assets/icons/Logo_Main.png" alt="Логотип" />
    </div>

    <!-- Страницы -->
    <div id="home" class="page active">
      <div class="dropdown-container">
        <select id="main-dropdown" class="main-dropdown">
          <option value="">Выберите заведение</option>
        </select>
      </div>
      <div class="buttons-row">
        <button class="btn-AddRestaurant">Добавить заведение</button>
        <button class="btn-Create">Создать заявку</button>
      </div>
    </div>

    <div id="requests" class="page">
      <div class="table-filters">
        <div class="filter-row">
          <div class="filter-group">
            <label for="filter-date-created">Дата создания:</label>
            <input type="date" id="filter-date-created" class="filter-input">
          </div>
          <div class="filter-group">
            <label for="filter-date-completed">Дата завершения:</label>
            <input type="date" id="filter-date-completed" class="filter-input">
          </div>
          <div class="filter-group">
            <label for="filter-establishment">Заведение:</label>
            <select id="filter-establishment" class="filter-input">
              <option value="">Все заведения</option>
            </select>
          </div>
          <button id="clear-filters" class="btn-ClearFilters">Сбросить фильтры</button>
        </div>
      </div>

      <div class="table-container requests-table">
        <table class="main-table" id="requests-table">
          <thead>
            <tr>
              <th class="sortable" data-column="number">Номер <span class="sort-arrow"></span></th>
              <th class="sortable" data-column="date-created">Дата создания <span class="sort-arrow"></span></th>
              <th class="sortable" data-column="date-completed">Дата завершения <span class="sort-arrow"></span></th>
              <th class="sortable" data-column="establishment">Заведение <span class="sort-arrow"></span></th>
              <th>Тема</th>
              <th>Описание</th>
              <th>Решение</th>
            </tr>
          </thead>
          <tbody id="requests-table-body"></tbody>
        </table>
      </div>
    </div>

    <div id="accounts" class="page">
      <button id="select-establishment-btn" class="btn-SelectRestModal" data-open="establishment-modal">Выбрать заведение</button>
      <div id="selected-establishment" class="bg-gray-800 p-4 rounded-lg text-center text-gray-400 font-medium">
        Заведение не выбрано
      </div>
    </div>

    <div id="dashboard" class="page">
      <div class="table-container" style="height:100%; padding:0;">
        <iframe id="grafana-frame" src="" width="100%" height="100%" frameborder="0" style="min-height: calc(100vh - 100px); border:0;"></iframe>
      </div>
    </div>

    <div id="profile" class="page">
      <div class="profile-header">
        <div class="user-info">
          <h2 id="user-fullname">Имя Фамилия</h2>
          <p id="user-phone">+7 (XXX)-XXX-XXXX</p>
        </div>
        <i id="edit-icon" class="fas fa-cog" data-open="edit-modal"></i>
      </div>
      <button id="logout-btn" class="btn-CancelModal">Выйти</button>
    </div>

    <!-- Модалки -->
    <div id="edit-modal" class="modal hidden">
      <div class="modal-content">
        <h3 class="font-bold mb-4">Редактировать профиль</h3>
        <input type="text" id="edit-firstname" placeholder="Имя" />
        <input type="text" id="edit-lastname" placeholder="Фамилия" />
        <div class="flex gap-2">
          <button id="save-profile-btn" class="btn-Save flex-1">Сохранить</button>
          <button class="btn-CancelModal flex-1" data-close="edit-modal">Отмена</button>
        </div>
      </div>
    </div>

    <div id="establishment-modal" class="modal hidden">
      <div class="modal-content">
        <h3 class="font-bold mb-4 text-center">Ваши заведения</h3>
        <div class="establishment-list space-y-3"></div>
        <div class="flex gap-2 mt-6">
          <button class="btn-CancelModal flex-1" data-close="establishment-modal">Отмена</button>
        </div>
      </div>
    </div>

    <!-- Навигация -->
    <nav class="nav-bar">
      <a href="#" data-page="home" class="nav-btn active"><i class="fas fa-home"></i><span>Главная</span></a>
      <a href="#" data-page="requests" class="nav-btn"><i class="fas fa-comment-alt"></i><span>Заявки</span></a>
      <a href="#" data-page="accounts" class="nav-btn"><i class="fas fa-file-invoice-dollar"></i><span>Счета</span></a>
      <a href="#" data-page="dashboard" class="nav-btn"><i class="fas fa-chart-line"></i><span>Дашборд</span></a>
      <a href="#" data-page="profile" class="nav-btn"><i class="fas fa-user"></i><span>Профиль</span></a>
    </nav>
  </div>

  <!-- Скрипты -->
  <script defer src="js/api.js"></script>
  <script defer src="js/auth.js"></script>
  <script defer src="js/app.js"></script>
</body>
</html>
